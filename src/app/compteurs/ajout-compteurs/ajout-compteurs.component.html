<div class="mb-2">
  <app-custom-navbar></app-custom-navbar>
</div>

<div class="flex flex-col">

    <div class="bg-indigo-500 flex flex-row justify-center">
      <p class="text-white text-4xl my-2">Ajouter un nouveau compteur</p>
    </div>

    <div class="flex flex-row">
      <div class="flex flex-1 w-3/5 flex-col ">
        <form
          (ngSubmit)="ajouterCompteur()"
          class = "flex flex-col p-3 gap-y-2"
        >
          <div class="flex flex-row bg-white border-2 m-1 border-indigo-500">
            <span class="p-1 pl-1 text-indigo-500 text-xl font-bold pi pi-gauge"></span>
            <input type="text"
                   class="border-white w-full text-md focus:outline-none"
                   [(ngModel)]="compteur$.marque"
                   [ngModelOptions]="{standalone: true}"
                   placeholder="Marque">
          </div>

          <div class="flex flex-row bg-white border-2 m-1 border-indigo-500">
            <span class="p-1 pl-1 text-indigo-500 text-xl font-bold pi pi-compass "></span>
            <input type="text"
                   class="border-white w-full text-md focus:outline-none"
                   [(ngModel)]="compteur$.modele"
                   [ngModelOptions]="{standalone: true}"
                   placeholder="Modèle">
          </div>

          <div class="flex flex-row bg-white border-2 m-1 border-indigo-500">
            <span class="p-1 pl-1 text-indigo-500 text-xl font-bold pi pi-bolt "></span>
            <input type="text"
                   class="border-white w-full text-md focus:outline-none"
                   [(ngModel)]="compteur$.voltageMax"
                   [ngModelOptions]="{standalone: true}"
                   placeholder="Voltage maximum">
          </div>



          <div class="flex flex-row bg-white border-2 m-1 border-indigo-500">
            <span class="p-1 pl-1 text-indigo-500 text-xl font-bold pi pi-bolt "></span>
            <input type="text"
                   class="border-white w-full text-md focus:outline-none"
                   [(ngModel)]="nombreCadrans$"
                   [ngModelOptions]="{standalone: true}"
                   placeholder="Nombre de cadrans">
            <p
              class="cursor-pointer bg-indigo-500 text-white p-1
                       text-2xl hover:bg-white hover:text-indigo-500"
              (click)="creerTypesCadransARemplir(this.nombreCadrans$)"
            >
              Remplir
            </p>
          </div>

          <div class="h-full flex flex-row items-center w-2/5 justify-center">
            <label for="photo" class="mr-2 font-bold">Sélectionner une photo:</label>
            <input type="file" id="photo" name="photo" (change)="onFileSelected($event)" class="mr-2">
            <img *ngIf="selectedFile" [src]="selectedFile" class="p-4" alt="Photo de compteur">
          </div>


          <div
            *ngIf="nombreCadrans$>0"
            class="bg-white"
          >
            <div class="flex overflow-auto flex-col md:flex">
              <table class="">
                <thead>
                <tr class="bg-white border-b-2">
                  <th class="p-2 text-left">Nombre roues</th>
                  <th class="p-2 text-left">Prix watt</th>
                  <th class="p-2 text-left">Heure activation</th>
                  <th class="p-2 text-left">Heure arrêt</th>
                  <th class="p-2 text-left">Modèle</th>
                </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let typeCadran of compteur$.typesCadrans, let i=index" class="space-x-1 text-sm border-b-2 {{i%2==0?'bg-blue-300':'bg-white'}} ">
                    <td>
                      <input
                        type="text"
                        class="p-2 text-left"
                        [(ngModel)]="typeCadran.nombreRoues"
                        [ngModelOptions] = "{standalone:true}"
                      >
                    </td>
                    <td>
                      <input
                        class="p-2 text-left"
                        [(ngModel)]="typeCadran.prixWatt"
                        [ngModelOptions] = "{standalone:true}"
                      >
                    </td>
                    <td>
                      <input
                        type="time"
                        class="p-2 text-left"
                        [(ngModel)]="typeCadran.heureActivation"
                        [ngModelOptions] = "{standalone:true}"
                      />
                    </td>
                    <td>
                      <input
                        type="time"
                        class="p-2 text-left"
                        [(ngModel)]="typeCadran.heureArret"
                        [ngModelOptions] = "{standalone:true}"
                      />
                    </td>
                    <td>
                      <input
                        class="p-2 text-left"
                        [(ngModel)]="typeCadran.cadranModel"
                        [ngModelOptions] = "{standalone:true}"
                      />
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <button type="submit" class="flex flex-row justify-center items-center border-2 border-indigo-500 bg-indigo-500 text-white text-3xl">
            <span class="p-2">Ajouter</span>
            <span class="pi pi-arrow-right"></span>
          </button>

        </form>

      </div>
    </div>

  </div>
